\smsubsection{Systematic Date and Time Errors}\label{an:date} 
\smvertspace
Correct time-stamps in the audit logs
are critical in post election audits as any incorrect time-stamps
could preclude further log analysis. 
We classify time-stamp errors into two categories: errors
resulting from incorrectly set clocks and errors resulting from apparent bugs in
the time-stamp mechanism itself. Our tool will analyze log files to
find and report errors of each category type.

This analyses requires that each event in the audit log
is marked with a time-stamp based on the machine's internal clock. If
the clock can be manually set, we require that any adjustment made to
the clock is recorded as an event in the
audit log. Additionally, opening and closing events recorded in the logs proved
useful to the analysis. It allowed the analysis to report only those
errors that occur on election day and to avoid reporting as error
any inconsistent time-stamps that occur prior to election day and are
likely the result of pre-election testing or configuration of the
machines. We developed some checks to report if any of
the above requirements are not met by the log data.

Often, an analysis of the time-stamps can produce ambiguous
results. For example, if a machine has its clock set an hour back it
is difficult to determine, from the log files alone, whether the machine
was opened early or its clock was incorrectly set. In our analysis, we
favor accurate identification of date errors over complete
identification. We want to avoid flooding the user with false or
ambiguous error reports. For this reason, we developed techniques to
remove as many ambiguities as possible and report only those
instances which we can positively identify as errors.

We perform these analyses by sequentially parsing each event in the
audit log while looking for events marking a manual clock adjustment
or an erroneous shift between two consecutive time stamps. We explain
our technique further in the following subsections.

\smsubsubsection{Incorrectly Set Dates}
This report identifies any machine that opened for election day voting
with an incorrectly set clock.  This means the opening event and
possibly all subsequent vote events were recorded with incorrect
time-stamps. This error can prevent other analyses
from properly detecting how long the polls stayed open, whether they opened on
time, or if they experienced long lines. Additionally, it may be useful for an
election official to identify counties or precincts where these errors were
particularly common so that pre-election testing procedures can be improved.
We used two different detection algorithms to identify these errors.

The first found machines that opened for voting with wildly incorrect
dates and times. In this algorithm we looked for any machine which
opened for election day voting on any date after the official election
day or any date more than one month prior to election day. This one
month threshold allowed us to avoid reporting those machines which
were legitimately opened, possibly for early voting, on a date before
the official election day. \cks{Patrick, is this the right reason for
  the one month window? Correct it if I'm wrong.}

The first algorithm found those machines whose date and time were
off by a large amount, but it will not find machines that have a
time-stamp that is off by only a small amount, perhaps just an
hour. To find those machines we used a different technique. Instead of
looking at the time of opening or closing, we instead looked for
machines whose time-stamp was manually adjusted at some point while
the machine was opened for voting. If we saw an event indicating the
time-stamp was set forward one hour, for example, we could surmise that
up until that point, the machine's clock had been one hour slow and we
could retroactively adjust the time-stamps of the earlier events for
use by our other analyses.

If a machine opens with a clock that is wrong, but by an amount
smaller than our allowed window of error (one month for slow clocks,
24 hours for fast clocks), and whose clock is not adjusted at any
point during election day, our analyses will fail to catch the
error. We decided on this window size after some trial and error with
the South Carolina data set we were working with; this size seemed to
yield the fewest false positives while still returning useful
results. Possibly, other data sets will require a different
window. This analysis could reasonably be parametrized to
allow the user to specify the desired window size if the default does
not provide useful results.

\smsubsubsection{Datetime Errors}
This report identifies anomalies in the time stamps that are not a result
of human error. In the course of our analysis of the South Carolina
data set, we found many dates that changed, seemingly at random and without
a manual date adjustment event. Sometimes these jumps were temporary
and the clock would jump back to its original time, other jumps
appeared to be permanent. These occurrences suggest an issue with the
machine itself rather than a procedural error. The cause of these errors remains
unknown, but it is concerning that these values can change arbitrarily
as they have the potential to invalidate other audit analyses.  Reporting these
anomalies may assist officials in determining which machines require
inspection by the DRE vendor.

Since events are appended in chronological order, any time-stamp that decreases
chronologically without a corresponding event indicating a manual
adjustment took place is an error and is detected by this
analysis. Forward jumps in time are not necessarily the result of an 
inconsistent time record; a machine can be shut down in a hibernation state for
weeks between events. However, given the relatively short duration of elections, jumps
forward in time, that are past a certain threshold, can reasonably be considered
erroneous. The algorithm looked for deltas between time-stamps that jump
forward by more then 33 days. With the South Carolina data set we
analyzed, this threshold seemed to
avoid including machines that were simply in hibernation between the
factory setup and election day voting. Additionally, some machines were found to have their clock set to
a type of null state where the clock stopped incrementing and marked blank
dates; therefore, our analysis looks for these errors as well.

For each error detected, the number of events associated with the error
is reported, as well as the anomalous date and the machine serial
number. The number of events associated with an error is the number
of events in the event log between the point where the anomalous clock
change occurs and the point where the clock corrects itself, if it ever
does. If the clock never corrects itself, all subsequent events in the
log are counted as associated with the error. If the clock
does correct itself, that is detected as follows. The \emph{start
event} of the anomaly is the event just prior to the event with the
anomalous time stamp.
A backward jump is presumed over if an event
appears that is chronologically forward in time compared to the start event.
A forward jump is assumed over if an event appears on the same day of the
starting event.  The zero clock anomaly is detected as returning to normal as
soon as a non-zero date appears.

